{"ast":null,"code":"import nc from \"next-connect\";\nimport notes from \"../data\";\n\nconst getNote = id => notes.find(n => n.id === parseInt(id));\n\nconst handler = nc().get((req, res) => {\n  const note = getNote(req.query.id);\n\n  if (!note) {\n    res.status(404);\n    res.end();\n    return;\n  }\n\n  res.json({\n    data: note\n  });\n}).patch((req, res) => {\n  const note = getNote(req.query.id);\n\n  if (!note) {\n    res.status(404);\n    res.end();\n    return;\n  }\n\n  const i = notes.findIndex(n => n.id === parseInt(req.query.id));\n  const updated = { ...note,\n    ...req.body\n  };\n  notes[i] = updated;\n  res.json({\n    data: updated\n  });\n}).delete((req, res) => {\n  const note = getNote(req.query.id);\n\n  if (!note) {\n    res.status(404);\n    res.end();\n    return;\n  }\n\n  const i = notes.findIndex(n => n.id === parseInt(req.query.id));\n  notes.splice(i, 1);\n  res.json({\n    data: req.query.id\n  });\n});\nexport default handler;","map":{"version":3,"sources":["/Users/mohsen.shafie/Workspace/next-js-example/pages/api/note/[id].js"],"names":["nc","notes","getNote","id","find","n","parseInt","handler","get","req","res","note","query","status","end","json","data","patch","i","findIndex","updated","body","delete","splice"],"mappings":"AAAA,OAAOA,EAAP,MAAe,cAAf;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,MAAMC,OAAO,GAAIC,EAAD,IAAQF,KAAK,CAACG,IAAN,CAAYC,CAAD,IAAOA,CAAC,CAACF,EAAF,KAASG,QAAQ,CAACH,EAAD,CAAnC,CAAxB;;AAEA,MAAMI,OAAO,GAAGP,EAAE,GACfQ,GADa,CACT,CAACC,GAAD,EAAMC,GAAN,KAAc;AACjB,QAAMC,IAAI,GAAGT,OAAO,CAACO,GAAG,CAACG,KAAJ,CAAUT,EAAX,CAApB;;AAEA,MAAI,CAACQ,IAAL,EAAW;AACTD,IAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX;AACAH,IAAAA,GAAG,CAACI,GAAJ;AACA;AACD;;AAEDJ,EAAAA,GAAG,CAACK,IAAJ,CAAS;AAAEC,IAAAA,IAAI,EAAEL;AAAR,GAAT;AACD,CAXa,EAYbM,KAZa,CAYP,CAACR,GAAD,EAAMC,GAAN,KAAc;AACnB,QAAMC,IAAI,GAAGT,OAAO,CAACO,GAAG,CAACG,KAAJ,CAAUT,EAAX,CAApB;;AAEA,MAAI,CAACQ,IAAL,EAAW;AACTD,IAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX;AACAH,IAAAA,GAAG,CAACI,GAAJ;AACA;AACD;;AAED,QAAMI,CAAC,GAAGjB,KAAK,CAACkB,SAAN,CAAiBd,CAAD,IAAOA,CAAC,CAACF,EAAF,KAASG,QAAQ,CAACG,GAAG,CAACG,KAAJ,CAAUT,EAAX,CAAxC,CAAV;AACA,QAAMiB,OAAO,GAAG,EAAE,GAAGT,IAAL;AAAW,OAAGF,GAAG,CAACY;AAAlB,GAAhB;AAEApB,EAAAA,KAAK,CAACiB,CAAD,CAAL,GAAWE,OAAX;AACAV,EAAAA,GAAG,CAACK,IAAJ,CAAS;AAAEC,IAAAA,IAAI,EAAEI;AAAR,GAAT;AACD,CA1Ba,EA2BbE,MA3Ba,CA2BN,CAACb,GAAD,EAAMC,GAAN,KAAc;AACpB,QAAMC,IAAI,GAAGT,OAAO,CAACO,GAAG,CAACG,KAAJ,CAAUT,EAAX,CAApB;;AAEA,MAAI,CAACQ,IAAL,EAAW;AACTD,IAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX;AACAH,IAAAA,GAAG,CAACI,GAAJ;AACA;AACD;;AACD,QAAMI,CAAC,GAAGjB,KAAK,CAACkB,SAAN,CAAiBd,CAAD,IAAOA,CAAC,CAACF,EAAF,KAASG,QAAQ,CAACG,GAAG,CAACG,KAAJ,CAAUT,EAAX,CAAxC,CAAV;AAEAF,EAAAA,KAAK,CAACsB,MAAN,CAAaL,CAAb,EAAgB,CAAhB;AAEAR,EAAAA,GAAG,CAACK,IAAJ,CAAS;AAAEC,IAAAA,IAAI,EAAEP,GAAG,CAACG,KAAJ,CAAUT;AAAlB,GAAT;AACD,CAxCa,CAAhB;AA0CA,eAAeI,OAAf","sourcesContent":["import nc from \"next-connect\";\nimport notes from \"../data\";\n\nconst getNote = (id) => notes.find((n) => n.id === parseInt(id));\n\nconst handler = nc()\n  .get((req, res) => {\n    const note = getNote(req.query.id);\n\n    if (!note) {\n      res.status(404);\n      res.end();\n      return;\n    }\n\n    res.json({ data: note });\n  })\n  .patch((req, res) => {\n    const note = getNote(req.query.id);\n\n    if (!note) {\n      res.status(404);\n      res.end();\n      return;\n    }\n\n    const i = notes.findIndex((n) => n.id === parseInt(req.query.id));\n    const updated = { ...note, ...req.body };\n\n    notes[i] = updated;\n    res.json({ data: updated });\n  })\n  .delete((req, res) => {\n    const note = getNote(req.query.id);\n\n    if (!note) {\n      res.status(404);\n      res.end();\n      return;\n    }\n    const i = notes.findIndex((n) => n.id === parseInt(req.query.id));\n\n    notes.splice(i, 1);\n\n    res.json({ data: req.query.id });\n  });\n\nexport default handler;\n"]},"metadata":{},"sourceType":"module"}